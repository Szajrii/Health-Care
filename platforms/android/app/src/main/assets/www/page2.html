

<html>
    <head>
        <title>Title</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
		<script src="js/pgb.js"></script>
		<script src="cordova.js"></script>
		<!-- UIkit CSS -->
		<link rel="stylesheet" href="css/uikit.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;subset=latin-ext" rel="stylesheet">

		<!-- UIkit JS -->
		<script src="js/uikit.min.js"></script>
		<script src="js/uikit-icons.min.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase-auth.js"></script>
        <script type="text/javascript">
          
          firebase.initializeApp({
            apiKey: "AIzaSyDNJfmduRSncwtKmw3wX69KWz36gNgWj9Y",
            authDomain: "health-care-71096.firebaseapp.com",
            databaseURL: "https://health-care-71096.firebaseio.com",
            projectId: "health-care-71096",
            storageBucket: "",
            messagingSenderId: "278088023798"
        });
        </script>
    </head>
    <body onload="init()">


     <div class="uk-text-center" style="font-size: 35px; font-weight: 700; color:#4CC0D3; padding: 20px 0;">
        Login
    </div>

    <div class="uk-text-center uk-margin">
      <img src="img/11.png" alt="" style="width: 60%; height: auto;">
    </div>

    


    <div class="uk-margin uk-text-center">
        <div class="uk-inline">
            <span class="uk-form-icon" uk-icon="icon: user"></span>
            <input class="uk-input" type="text" id="imejl" >
        </div>
    </div>

    <div class="uk-margin uk-text-center">
        <div class="uk-inline">
            <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: lock"></span>
            <input class="uk-input" id="pw" type="password">
        </div>
    </div>
    
<div class="uk-text-center" style="margin-top: 40px">
<button class="uk-button uk-button-primary uk-width-1-1 uk-margin-small-bottom" href="" id="loginButton" style="width: 80%;"">Login</button>
<a class="uk-button uk-button-secondary uk-width-1-1 uk-margin-small-bottom" href="signup.html"  style="width: 80%;">SignUp</a>
</div>



<div style="width: 100%; margin-top: 15px;">
  <div style="width: 80%; margin: 0 auto; text-align: center;">
    <button href="" class="uk-icon-button uk-margin-small-right" id="githubLogIn" uk-icon="github"></button>
    <a href="" class="uk-icon-button  uk-margin-small-right" uk-icon="facebook"></a>
    <button href="" class="uk-icon-button" uk-icon="google-plus" id="googleLogIn"></button>
  </div>
</div>


<div class="uk-text-center uk-padding-small" id="statuslog"></div>





<script>
           // Initialize Firebase
        
const provider = new firebase.auth.GoogleAuthProvider();
var database = firebase.database();
var providergit = new firebase.auth.GithubAuthProvider();

document.querySelector('#loginButton').addEventListener('click', function () {

  firebase.auth().signOut().then(function() {
  // Sign-out successful.
 
}).catch(function(error) {
  // An error happened.
});
          var login = document.getElementById('imejl').value;
          var pw = document.getElementById('pw').value;
        firebase.auth().signInWithEmailAndPassword(login, pw).catch(function(error) {
  // Handle Errors here.
  var errorCode = error.code;
  var errorMessage = error.message;
  alert(errorMessage);
  console.log(errorCode);
  // ...
});
        firebase.auth().onAuthStateChanged(function(user) {
          
          // setTimeout(function(){
          //   var user = firebase.auth().currentUser;
  if (user) {
    // User is signed in.
        // alert("witaj dziubasku");
        // var a = document.getElementById("loginButton");
        // a.href = "#home";
    window.location.href = "home.html";
    var user = firebase.auth().currentUser;
var name, email, photoUrl, uid, emailVerified;



  } else {
        // alert("spierdalaj dziubasku");
  }


// },3000);
});
      });

// document.querySelector('#signOut').addEventListener('click', function () {
// firebase.auth().signOut().then(function() {
//   // Sign-out successful.
//   alert("wylogowales sie poprawnie dziubasku");
// }).catch(function(error) {
//   // An error happened.
// });
// });

    function status(){
firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    // User is signed in.
    var status = document.getElementById('statuslog');
    status.innerHTML = "użytkownik zalogowany!"
    window.location.href = "home.html";
    var user = firebase.auth().currentUser;
    var name = user.displayName;
    alert(name);
    console.log(name);
  } else {
    // No user is signed in.
    var status = document.getElementById('statuslog');
    status.innerHTML = "użytkownik nie zalogowany!"

  }
});
}

status();

document.querySelector('#googleLogIn').addEventListener('click', function () {
            firebase.auth().signInWithRedirect(provider).then(function() {
              return firebase.auth().getRedirectResult();
            }).then(function(result) {
              // This gives you a Google Access Token.
              // You can use it to access the Google API.
              var token = result.credential.accessToken;
              // The signed-in user info.
              var user = result.user;

           
 
      // ...
            }).catch(function(error) {
              // Handle Errors here.
              var errorCode = error.code;
              var errorMessage = error.message;
                alert(errorMessage);
              console.log(errorCode)
              console.log(errorMessage);
            });


        });

document.querySelector('#githubLogIn').addEventListener('click', function () {
            firebase.auth().signInWithRedirect(providergit).then(function() {
              return firebase.auth().getRedirectResult();
            }).then(function(result) {
              // This gives you a Google Access Token.
              // You can use it to access the Google API.
              var token = result.credential.accessToken;
              // The signed-in user info.
              var user = result.user;
              console.log(token);
              console.log(user);

           
 
      // ...
            }).catch(function(error) {
              // Handle Errors here.
              var errorCode = error.code;
              var errorMessage = error.message;
                alert(errorMessage);
              console.log(errorCode)
              console.log(errorMessage);
            });


        });
</script>

    </body>
</html>