const provider = new firebase.auth.GoogleAuthProvider();
var uzytkownik,plecstatus,myVar,database=firebase.database();function myFunction(){myVar=setTimeout(showPage,500)}function showPage(){document.getElementById("loader").style.display="none",document.getElementById("myDiv").style.display="block"}document.querySelector("#signOut").addEventListener("click",function(){window.location="page2.html",firebase.auth().signOut().then(function(){}).catch(function(e){})});var prevScrollpos=window.pageYOffset;function daneOsobowe(){var e=document.getElementById("daneosobowe");firebase.auth().onAuthStateChanged(function(a){var n=(a=firebase.auth().currentUser).uid;a?(firebase.database().ref("users/"+n).child("name").on("value",function(a){""==a.val()||null==a.val()?e.innerHTML="Brak danych":e.innerHTML=a.val()+" "}),firebase.database().ref("users/"+n).child("secondname").on("value",function(a){if(""==a.val()||null==a.val());else{var n=document.createTextNode(a.val());e.appendChild(n)}}),firebase.database().ref("users/"+n).child("płeć").on("value",function(e){plecstatus=e.val();var a=document.getElementById("zdjecieprofilowe");a.src="Kobieta"==plecstatus?"img/female.png":"img/male.png"})):window.location.href="page2.html"})}function addZeroes(e){var a=e.toString(),n=Number(a),t=a.split(".");return(t.length<10||t[1].length<3)&&(n=n.toFixed(2)),n}function homePage(){firebase.auth().onAuthStateChanged(function(e){var a,n,t=(e=firebase.auth().currentUser).uid,o=0,i=[],s=0,r=[],d=[],l=[],u=[],c=[],f=((new Date).getTime(),[11,6.5,18,51,45,.4,97,32,36,400,20,99,199,5,40,45,5.5,145,1.2,2.75,158,740]),p=[4.1,4.5,13.5,40,20,.1,80,26,31,140,3,70,170,.32,5,8,3.5,135,.65,2.25,50,148],m=[11,5.6,15.5,47,45,.4,97,32,36,400,30,99,199,5,40,35,5.5,145,1.2,2.75,145,740],h=[4.1,3.9,11.5,37,20,.1,80,26,31,140,6,70,170,.32,5,7,3.5,135,.65,2.25,37,148],v=["Białe krwinki","Czerwone krwinki","Hemoglobina","Hematokryt","Limfocyty","Monocyty","MCV","MCH","MCHC","Płytki krwi","OB","Glukoza","Cholesterol","TSH","ALAT","AspAT","Potas","Sód","Magnez","Wapń","Żelazo","Witamina B12"];e?firebase.database().ref("users/"+t+"/Badania/").orderByKey().on("value",function(e){(e.forEach(function(e){var a=e.key;""!=a&&(i[s]=a,s+=1)}),0!=s)?firebase.database().ref("users/"+t+"/Badania/"+i[i.length-1]).on("value",function(e){var s=e.val();c[0]=s.Białe_krwinki,c[1]=s.Czerwone_krwinki,c[2]=s.Hemoglobina,c[3]=s.Hematokryt,c[4]=s.Limfocyty,c[5]=s.Monocyty,c[6]=s.MCV,c[7]=s.MCH,c[8]=s.MCHC,c[9]=s.Płytki_krwi,c[10]=s.OB,c[11]=s.Glukoza,c[12]=s.Cholesterol,c[13]=s.TSH,c[14]=s.ALAT,c[15]=s.AspAT,c[16]=s.Potas,c[17]=s.Sód,c[18]=s.Magnez,c[19]=s.Wapń,c[20]=s.Żelazo,c[21]=s.Witamina_B12,firebase.database().ref("users/"+t).child("płeć").on("value",function(e){if("Mężczyzna"==(plecstatus=e.val()))for(var s=1;s<=22;s++)0!=c[s-1]&&(c[s-1]<p[s-1]?(r.push(v[s-1]),d.push(addZeroes(c[s-1])),l.push("Poniżej normy"),a=p[s-1]-c[s-1],u.push("(- "+addZeroes(a)+")"),o++):c[s-1]>f[s-1]&&(r.push(v[s-1]),d.push(addZeroes(c[s-1])),l.push("Powyżej normy"),a=c[s-1]-f[s-1],u.push("(+ "+addZeroes(a)+")"),o++));else for(s=1;s<=22;s++)0!=c[s-1]&&(c[s-1]<h[s-1]?(r.push(v[s-1]),d.push(addZeroes(c[s-1])),l.push("Poniżej normy"),a=h[s-1]-c[s-1],u.push("(- "+addZeroes(a)+")"),o++):c[s-1]>m[s-1]&&(r.push(v[s-1]),d.push(addZeroes(c[s-1])),l.push("Powyżej normy"),a=c[s-1]-m[s-1],u.push("(+ "+addZeroes(a)+")"),o++));var b=o;b>4&&(b=4),firebase.database().ref("users/"+t+"/Badania/"+i[i.length-1]).child("Data").on("value",function(e){var a=(n=e.val()).split(" ");document.getElementById("dataostatniegobadania").innerHTML=a[0]+" "+a[1]});for(var w=[],y=1;y<=o;y++)w.push(y);if(0!=o){for(s=1;s<=b;s++){if(0!=r.length){var k=Math.floor(Math.random()*o),g=w[k];w.splice(k,1),o--}$("#homewyswietlanie").append('  <div class="first-box" id="rest-box">         <div class="rest-box-content">           <div class="circle"  style="" id="znakwskaznika">G</div>         </div>                  <div class="container-element-box">           <div style="color: #3A4759; font-size: 14px; font-weight:600" id="rodzaj">Glukoza</div>            <span class="value-element-mark">wartość:            <span style="color:#E36E7B" id="rozneodnormy">powyżej normy</span>          </span>         </div>         <div class="value-element-inner">         <div style="color: #E36E7B; font-size: 12px;" ><span id="wartoscwskaznika">115,00</span>            <span style="font-size: 10px; color: #47A0B5" id="przekroczonawartosc">(+12,00)</span>         </div>          <span class="element-date" id="databadania">Kwi. 24</span>        </div>       </div>   ');var z=document.getElementById("rodzaj"),B=document.getElementById("wartoscwskaznika"),A=document.getElementById("rozneodnormy"),E=document.getElementById("znakwskaznika"),M=document.getElementById("przekroczonawartosc"),C=document.getElementById("databadania");z.setAttribute("id","rodzaj"+s),z.innerHTML=r[g-1],B.setAttribute("id","wartoscwskaznika "+s),B.innerHTML=d[g-1],A.setAttribute("id","rozneodnormy "+s),A.innerHTML=l[g-1],E.setAttribute("id","znakwskaznika "+s),E.innerHTML=r[g-1].charAt(0),M.setAttribute("id","przekroczonawartosc "+s),M.innerHTML=u[g-1],C.setAttribute("id","databadania "+s),C.innerHTML=n}for(y=1;y<=b;y+=2){(E=document.getElementById("znakwskaznika "+y)).style.backgroundColor="#4298b7"}}else $("#homewyswietlanie").append('<div class="uk-text-center" style="margin: 30px 0;"><div class="uk-alert-success" uk-alert><a class="uk-alert-close" uk-close></a><p>Wszysie wyniki w normie. <br> <span style="font-size: 25px; font-weight: 600; ">HURA</span>.</p></div></div>')})}):($("#ostatnietext").remove(),$("#ostatnieicon").remove(),$("#wyswietlostatniebadanie").append('  <div class="first-box-content">  <div class="first-box-date" id="dataostatniegobadania">Brak Badań</div>   <div class="first-box-comment">Dodaj swoje badanie</div>   </div>   <div class="icon">     <a  href="dodajbadanie.html"> <span uk-icon="icon:  chevron-right; ratio: 1.75" style="color: #E36E7B;"></span></a>   </div>   '),$("#button-dodaj").append('<div class="uk-text-center" style="margin-top:30px;"><a href="dodajbadanie.html" class="uk-button uk-button-primary">Dodaj Badanie</a></div>'))}):window.location.href="page2.html"})}function sprawdzProfil(){firebase.auth().onAuthStateChanged(function(e){var a,n,t,o,i=(e=firebase.auth().currentUser).uid;e?firebase.database().ref("users/"+i).child("name").on("value",function(e){a=e.val(),firebase.database().ref("users/"+i).child("secondname").on("value",function(e){n=e.val(),firebase.database().ref("users/"+i).child("wiek").on("value",function(e){t=e.val(),firebase.database().ref("users/"+i).child("płeć").on("value",function(e){o=e.val(),""!=a&&""!=n&&""!=t&&""!=o&&null!=a&&null!=n&&null!=t&&null!=o||(window.location.href="updated-profil.html")})})})}):window.location.href="page2.html"})}window.onscroll=function(){var e=window.pageYOffset;document.getElementById("navbar").style.bottom=prevScrollpos>e?"0":"-81px",prevScrollpos=e},firebase.auth().onAuthStateChanged(function(e){e||(window.location.href="page2.html")}),daneOsobowe(),sprawdzProfil(),homePage();var zliczanie,ostatniebadanie=document.getElementById("ostatniebadanie");function sendID(e){var a=e;window.location="badania-adv.html?somval="+a}firebase.auth().onAuthStateChanged(function(e){var a=(e=firebase.auth().currentUser).uid;e?firebase.database().ref("users/"+a+"/Badania").once("value",function(e){zliczanie=e.numChildren(),ostatniebadanie.setAttribute("id","ostatniebadanie"+zliczanie)}):window.location.href="page2.html"});