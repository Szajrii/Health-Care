
<html>

<head>
  <title>Title</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <script src="js/pgb.js"></script>
  <script src="cordova.js"></script>
  <!-- UIkit CSS -->
  <link rel="stylesheet" href="css/uikit.min.css" />
  <link rel="stylesheet" href="css/style.css" />
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;subset=latin-ext" rel="stylesheet">
  <!-- UIkit JS -->
  <script src="js/jquery-2.1.4.min.js"></script>
  <script src="js/uikit.min.js"></script>
  <script src="js/uikit-icons.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase-auth.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
  <script type="text/javascript">
    firebase.initializeApp({
                apiKey: "AIzaSyDNJfmduRSncwtKmw3wX69KWz36gNgWj9Y",
                authDomain: "health-care-71096.firebaseapp.com",
                databaseURL: "https://health-care-71096.firebaseio.com",
                projectId: "health-care-71096",
                storageBucket: "",
                messagingSenderId: "278088023798"
            });
  </script>
</head>

<body onload="myFunction()" style="margin:0;">
  <div uk-spinner="ratio: 3" id="loader"></div>
  <div style="padding-bottom: 50px; display:none;" id="myDiv" class="animate-bottom">
    <nav class="uk-navbar-container " uk-navbar="mode: click" style="box-shadow: 0px 9px 24px -5px rgba(0,0,0,0.28); background-color: #259BF3;">
      <ul class="uk-navbar-nav" style="width: 100%; padding: 10px 0;">
        <li style="width: 10%"></li>
        <li style="width: 80%; text-align: center; font-size: 22px; color: white; font-weight: 500">Moje badania</li>
      </ul>
    </nav>
    <div class="header-element">
      <ul class="menu-container">
        <li class="menu-element menu-element2"><span id="wszystkiebadania" style="background-color: #E9E9E9; border-radius: 50px; padding: 5px 10px; color:black; font-weight: 600;">Wszystkie</span>
        </li>
        <li class="menu-element menu-element2"><span id="prawidłowebadania" style="background-color: transparent; border-radius: 50px; padding: 5px 10px; color:black; ">Prawidłowe</span>
        </li>
        <li class="menu-element menu-element2"><span id="nieprawidłowebadania" style="background-color: transparent; border-radius: 50px; padding: 5px 10px; color:black; ">Nieprawidłowe</span>
        </li>
      </ul>
    </div>
    <div style="width: 60%; height: 0.8px; background-color: #CCCCCC; margin: 0 auto;"></div>
    <div id="wyswietlanie"></div>
    <a href="dodajbadanie.html" class="uk-icon-button float" uk-icon="icon: plus; ratio: 1.2" id="AddButton" style="padding: 10px;"></a>
  </div>
  <div class="footer" id="navbar" style="">
    <nav class="uk-navbar-container" uk-navbar style="">
      <div class="uk-navbar-center">
        <ul class="uk-navbar-nav" style="">
          <li>
            <a href="home.html" style="text-transform: none; padding: 0 20px;">
              <div style="display: block;">
                <img src="img/menu/home.png" alt="">
                <br>Home</div>
            </a>
          </li>
          <li class="uk-active">
            <a href="" style="text-transform: none; padding: 0 20px;">
              <div style="display: block;">
                <img src="img/menu/badania-active.png" alt="">
                <br>Badania</div>
            </a>
          </li>
          <li>
            <a href="dziennik.html" style="text-transform: none; padding: 0 20px;">
              <div style="display: block;">
                <img src="img/menu/dziennik.png" alt="">
                <br>Dziennik</div>
            </a>
          </li>
          <li>
            <a href="planer.html" style="text-transform: none; padding: 0 20px;">
              <div style="display: block;">
                <img src="img/menu/planer.png" alt="">
                <br>Planer</div>
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </div>


<script>


  var myVar;

function myFunction() {
    myVar = setTimeout(showPage, 1000);
}

function showPage() {
  document.getElementById("loader").style.display = "none";
  document.getElementById("myDiv").style.display = "block";
}

  var prevScrollpos = window.pageYOffset;
window.onscroll = function() {
var currentScrollPos = window.pageYOffset;
  if (prevScrollpos > currentScrollPos) {
    document.getElementById("navbar").style.bottom = "0";
    document.getElementById("AddButton").style.bottom ="110px"

  } else {
    document.getElementById("navbar").style.bottom = "-81px";
    document.getElementById("AddButton").style.bottom ="29px"
  }
  prevScrollpos = currentScrollPos;
}





const provider = new firebase.auth.GoogleAuthProvider();
        var database = firebase.database();
        var plecstatus;

         firebase.auth().onAuthStateChanged(function(user) {
          var user = firebase.auth().currentUser;
          var uid = user.uid;

          if(user){
  var data3 =   firebase.database().ref('users/' + uid).child("płeć");
       data3.on('value', function(snapshot){
         plecstatus = snapshot.val();
});
     }else{

     }
     });


            


    function addZeroes( num ) {
    var tostring = num.toString();
    var value = Number(tostring);
    var res = tostring.split(".");
    if(res.length < 10 || (res[1].length < 3)) {
        value = value.toFixed(2);
    }else{

    }
    return value
}

function pokazBadanie() {
  var i = 1;
  var j = 1;   
  var g = 1;
  
          

firebase.auth().onAuthStateChanged(function(user) {
          var user = firebase.auth().currentUser;
          var uid = user.uid;
          var licznik;
    if(user){
      


var ref = firebase.database().ref('users/' + uid + '/Badania');
          ref.once('value', function(snapshot){
             licznik = snapshot.numChildren();
          
if(licznik != 0){
while(i <= licznik){

  

 $( "#wyswietlanie" ).append( ' <div id="sort"> <div class="first-box rest-box" id="szczegoly" onclick="sendID(this.id)"> \
        <div class="rest-box-content"> \
          <img src="img/icons/blood-green.png" alt="" id="c"> \
        </div> \
        \
        <div class="container-element-box">  \
          <div style="color: #3A4759; text-transform: none;">Badanie krwi</div>  \
          <span class="value-element-mark">wynik: \
           <span style="color:green;" id="b">prawidłowy</span> \
         </span> \
        </div> \
\
      <div class="value-element-inner"> \
        <div style="color: #A6B1C0; text-transform: none; font-weight: 400; font-size: 11px;" id ="asdd">2018 Luty 14 \
          \
        </div> \
         <div><a color ="blue" class="ahrefDecoration" >zobacz szczegóły</a></div> \
       </div> \
      </div> </div>');


                 var x = document.getElementById('asdd');
            x.setAttribute("id", "data " + i);

            var sort = document.getElementById('sort');
            sort.setAttribute("id", "sort " + i);

            var szczegoly = document.getElementById('szczegoly');
            szczegoly.setAttribute('id', "szczegoly" + i);




            var wynikbadania = document.getElementById('b');
            var kolor = document.getElementById('c');
  
            wynikbadania.setAttribute("id", "wynik " + i);
            kolor.setAttribute("id", "kolor " + i);


 i = i + 1;
}

  var j = 1;
  var g = 1;
  
   var ref = firebase.database().ref('users/' + uid + '/Badania/').orderByKey();
   ref.on('value',function(badaniaSnapshot){



    badaniaSnapshot.forEach(function(snapshot){
      var key = snapshot.key;
     



   var ref2 = firebase.database().ref('users/' + uid + '/Badania/' + key).child("Data");
   ref2.on('value',function(snapshot2){

    


    var obj = snapshot2.val();
    console.log(obj);

var y = document.getElementById('data ' + j);
            
           y.innerHTML = obj;
 
    j = j + 1;
 
      });


    var ref3 = firebase.database().ref('users/' + uid + '/Badania/' + key).child("Wynik");
     ref3.on('value', function(snapshot3){

        var wynikbadania1 = snapshot3.val();

           var wynik = document.getElementById("wynik " + g);
           var kolor = document.getElementById("kolor " + g);
           var sort = document.getElementById("sort " + g);
           var wynikbadania1  = snapshot3.val();
           wynik.innerHTML = wynikbadania1;
           if(wynikbadania1 == "Prawidłowy"){
            wynik.style.color = "green";
            kolor.src = "img/icons/blood-green.png"
            sort.classList.add("Prawidłowa");
           }else{
            wynik.style.color = "red";
            kolor.src = "img/icons/blood-red.png"
            sort.classList.add("Nieprawidłowa");
           }


           g = g + 1;
     });
             });
            });


 
}else{
  $('#wyswietlanie').append('<div id="brakbadan"><div class="uk-alert-danger uk-text-center uk-margin-top" uk-alert><p>Aktualnie masz żadnych badań!</p></div><div class="uk-text-center"><a href="dodajbadanie.html" class="uk-button uk-button-primary">Dodaj Badanie</a></div></div>')
}
 });



}else{
window.location.href = "page2.html";
}
  
  });   


        } 

pokazBadanie();
    




$(document).ready(function(){
    $("#prawidłowebadania").click(function(){
        $("#prawidłowebadania").css({"background-color": '#E9E9E9', "font-weight": '600'});
        $("#nieprawidłowebadania").css({"background-color": 'transparent', "font-weight": '300'});
        $("#wszystkiebadania").css({"background-color": 'transparent', "font-weight": '300'});
        $(".Nieprawidłowa").hide();
        $(".Prawidłowa").show();
    });
    $("#nieprawidłowebadania").click(function(){
        $("#prawidłowebadania").css({"background-color": 'transparent', "font-weight": '300'});
        $("#nieprawidłowebadania").css({"background-color": '#E9E9E9', "font-weight": '600'});
        $("#wszystkiebadania").css({"background-color": 'transparent', "font-weight": '300'});
        $(".Prawidłowa").hide();
        $(".Nieprawidłowa").show();
    });

    $("#wszystkiebadania").click(function(){
        $("#prawidłowebadania").css({"background-color": 'transparent', "font-weight": '300'});
        $("#nieprawidłowebadania").css({"background-color": 'transparent', "font-weight": '300'});
        $("#wszystkiebadania").css({"background-color": '#E9E9E9', "font-weight": '600'});
        $(".Prawidłowa").show();
        $(".Nieprawidłowa").show();
    });

});


function sendID(clickID){
var somval = clickID;
window.location = 'badania-adv.html?somval=' + somval;
}

</script>	
    
			
		</div>
	</body>
</html>

